<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Profeel</title>
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2016-05-06T03:19:43.000Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>Profeel</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>scrapy登录知乎以及相关问题</title>
    <link href="http://yoursite.com/2016/05/06/scrapy%E7%99%BB%E5%BD%95%E7%9F%A5%E4%B9%8E%E4%BB%A5%E5%8F%8A%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98/"/>
    <id>http://yoursite.com/2016/05/06/scrapy登录知乎以及相关问题/</id>
    <published>2016-05-06T03:09:25.000Z</published>
    <updated>2016-05-06T03:19:43.000Z</updated>
    
    <content type="html">&lt;blockquote&gt;
&lt;p&gt;因为想爬虫知乎的数据，所以采用scrapy来进行爬虫&lt;br&gt;对于一般的问题的链接以及相关的内容不需要登录，但是对于用户的关注数据，必须得登录之后才能获取&lt;br&gt;所以，通过scrapy登录&lt;br&gt;在登录的过程中，碰到了一点问题：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;验证码获取问题&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;p&gt;本来是想通过xpath来获取，通过shell调试后，发现无论怎么获取都是空的，无法获取，可能是因为js动态生成的原因而无法获取&lt;br&gt;–&amp;gt;曲线救国&lt;br&gt;所以查看captcha的src的地址，找到规律如下&lt;br&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;p = re.compile(&lt;span class=&quot;string&quot;&gt;r&#39;\d&amp;#123;13&amp;#125;&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;t = repr(time.time()*&lt;span class=&quot;number&quot;&gt;1000&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;m = p.findall(t)[&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 获得验证码的地址&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;captcha_url = &lt;span class=&quot;string&quot;&gt;&quot;http://m.zhihu.com/captcha.gif?r=&quot;&lt;/span&gt; + m + &lt;span class=&quot;string&quot;&gt;&quot;&amp;amp;type=login&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;其中repr方法第一次使用，为了让原始的object变成字符串，help返回如下：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;repr(...)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    repr(object) -&amp;gt; string&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Return the canonical string representation of the object.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    For most object types, eval(repr(object)) == object.&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;手动的获取&lt;/p&gt;
&lt;p&gt;在这之前，因为好几次使用了错误的密码，导致耽搁了进程&lt;/p&gt;
&lt;p&gt;po一下部分代码,截取到登录部分：&lt;br&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;81&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;82&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;83&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;84&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;85&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;86&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;87&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;88&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;89&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;90&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;91&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;92&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;93&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;94&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;95&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;96&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# -*- coding: utf-8 -*-&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; scrapy&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; urlparse&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; scrapy.loader &lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; ItemLoader&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; scrapy.loader.processors &lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; MapCompose, Join&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; ..settings &lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; headers, mode, proxy, email, password, host, port, db&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; ..items &lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; ZhihuTry2Item&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; time&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; os&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; re&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;TopicSpider&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(scrapy.Spider)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    name = &lt;span class=&quot;string&quot;&gt;&quot;topic&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    allowed_domains = [&lt;span class=&quot;string&quot;&gt;&quot;m.zhihu.com&quot;&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    zhihu_url = &lt;span class=&quot;string&quot;&gt;&quot;https://m.zhihu.com&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    login_url = &lt;span class=&quot;string&quot;&gt;&quot;https://m.zhihu.com/login/email&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    start_urls = (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;http://m.zhihu.com/&#39;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    )&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;start_requests&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(self)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;yield&lt;/span&gt; scrapy.Request(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            url=self.zhihu_url,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            headers=headers,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            meta=&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;string&quot;&gt;&quot;proxy&quot;&lt;/span&gt;: proxy,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;string&quot;&gt;&quot;cookiejar&quot;&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            callback=self.request_captcha&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        )&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;request_captcha&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(self, response)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;# 获取_xsrf值&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        _xsrf = response.css(&lt;span class=&quot;string&quot;&gt;&#39;input[name=&quot;_xsrf&quot;]::attr(value)&#39;&lt;/span&gt;).extract()[&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        p = re.compile(&lt;span class=&quot;string&quot;&gt;r&#39;\d&amp;#123;13&amp;#125;&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        t = repr(time.time()*&lt;span class=&quot;number&quot;&gt;1000&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        m = p.findall(t)[&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;# 获得验证码的地址&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        captcha_url = &lt;span class=&quot;string&quot;&gt;&quot;http://m.zhihu.com/captcha.gif?r=&quot;&lt;/span&gt; + m + &lt;span class=&quot;string&quot;&gt;&quot;&amp;amp;type=login&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;# 准备下载验证码&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;# 获取请求&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;yield&lt;/span&gt; scrapy.Request(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            url=captcha_url,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            headers=headers,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            meta=&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;string&quot;&gt;&quot;proxy&quot;&lt;/span&gt;: proxy,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;string&quot;&gt;&quot;cookiejar&quot;&lt;/span&gt;: response.meta[&lt;span class=&quot;string&quot;&gt;&quot;cookiejar&quot;&lt;/span&gt;],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;string&quot;&gt;&quot;_xsrf&quot;&lt;/span&gt;: _xsrf&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            callback=self.download_captcha&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        )&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;download_captcha&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(self, response)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;# 下载验证码&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;with&lt;/span&gt; open(&lt;span class=&quot;string&quot;&gt;&quot;captcha.gif&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;wb&quot;&lt;/span&gt;) &lt;span class=&quot;keyword&quot;&gt;as&lt;/span&gt; fp:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            fp.write(response.body)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;# 打开验证码&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        os.system(&lt;span class=&quot;string&quot;&gt;&#39;open captcha.gif&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;# 输入验证码&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;请输入验证码:\n&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        captcha = raw_input()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;# 输入账号和密码&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;yield&lt;/span&gt; scrapy.FormRequest(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            url=self.login_url,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            headers=headers,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            formdata=&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;string&quot;&gt;&quot;email&quot;&lt;/span&gt;: email,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;string&quot;&gt;&quot;password&quot;&lt;/span&gt;: password,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;string&quot;&gt;&quot;_xsrf&quot;&lt;/span&gt;: response.meta[&lt;span class=&quot;string&quot;&gt;&quot;_xsrf&quot;&lt;/span&gt;],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;string&quot;&gt;&quot;remember_me&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;true&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;string&quot;&gt;&quot;captcha&quot;&lt;/span&gt;: captcha&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            meta=&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;string&quot;&gt;&quot;proxy&quot;&lt;/span&gt;: proxy,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;string&quot;&gt;&quot;cookiejar&quot;&lt;/span&gt;: response.meta[&lt;span class=&quot;string&quot;&gt;&quot;cookiejar&quot;&lt;/span&gt;],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            callback=self.request_zhihu&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        )&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;request_zhihu&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(self, response)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&quot;&quot;&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            现在已经登录,请求www.zhihu.com的页面&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &quot;&quot;&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;print&lt;/span&gt; response.body&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;# yield scrapy.Request(url=self.zhihu_url,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;#                      headers=self.headers_dict,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;#                      meta=&amp;#123;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;#                          &quot;proxy&quot;: proxy,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;#                          &quot;cookiejar&quot;: response.meta[&quot;cookiejar&quot;],&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;#                      &amp;#125;,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;#                      callback=self.get_question,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;#                      dont_filter=True)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;因为想爬虫知乎的数据，所以采用scrapy来进行爬虫&lt;br&gt;对于一般的问题的链接以及相关的内容不需要登录，但是对于用户的关注数据，必须得登录之后才能获取&lt;br&gt;所以，通过scrapy登录&lt;br&gt;在登录的过程中，碰到了一点问题：&lt;/p&gt;
&lt;ol&gt;
&lt;
    
    </summary>
    
    
      <category term="scrapy" scheme="http://yoursite.com/tags/scrapy/"/>
    
  </entry>
  
  <entry>
    <title>关于scrapy没有跳转到下一个链接</title>
    <link href="http://yoursite.com/2016/05/05/%E5%A6%82%E6%9E%9C%E4%B8%8D%E7%9F%A5%E9%81%93%E9%97%AE%E9%A2%98%E5%9C%A8%E5%93%AA%E9%87%8C%EF%BC%8C%E5%B0%B1%E5%8E%BB%E4%B8%8A%E4%B8%AA%E5%8E%95%E6%89%80%E5%90%A7%EF%BC%8C%E4%B9%9F%E8%AE%B8%E5%9B%9E%E6%9D%A5%E5%B0%B1%E7%9F%A5%E9%81%93%E4%BA%86/"/>
    <id>http://yoursite.com/2016/05/05/如果不知道问题在哪里，就去上个厕所吧，也许回来就知道了/</id>
    <published>2016-05-05T03:00:20.000Z</published>
    <updated>2016-05-05T03:05:13.000Z</updated>
    
    <content type="html">&lt;p&gt;刚刚遇到一个奇怪的问题，代码应该是没有错误的&lt;br&gt;内容是这样的，准备在关于知乎的一个话题下，爬取所有问题的url保存到数据库中&lt;br&gt;但是，最后写了循环到yield scrapy.Request，但是没有成功的跳转，不知道问题所在&lt;br&gt;就去segmentfalt发帖问了&lt;br&gt;上个厕所回来，发现自己代码有问题，从头开始看，原来allowed_domains中的链接的topic写成了topics，然后生成的链接不在allowed_domains里面，所以就无法跳转&lt;/p&gt;
&lt;p&gt;╮(╯▽╰)╭&lt;br&gt;粗心大意&lt;br&gt;不过以后不会遇到类似的问题了，也会对allowed_domains有更深的理解了&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;刚刚遇到一个奇怪的问题，代码应该是没有错误的&lt;br&gt;内容是这样的，准备在关于知乎的一个话题下，爬取所有问题的url保存到数据库中&lt;br&gt;但是，最后写了循环到yield scrapy.Request，但是没有成功的跳转，不知道问题所在&lt;br&gt;就去segmentfalt发帖问了
    
    </summary>
    
      <category term="error" scheme="http://yoursite.com/categories/error/"/>
    
    
      <category term="scrapy" scheme="http://yoursite.com/tags/scrapy/"/>
    
  </entry>
  
  <entry>
    <title>关于scarpy ip的bug</title>
    <link href="http://yoursite.com/2016/05/04/%E5%85%B3%E4%BA%8Escarpy-ip%E7%9A%84bug/"/>
    <id>http://yoursite.com/2016/05/04/关于scarpy-ip的bug/</id>
    <published>2016-05-04T07:09:47.000Z</published>
    <updated>2016-05-04T07:33:33.000Z</updated>
    
    <content type="html">&lt;blockquote&gt;
&lt;p&gt;先描述一下问题：在学习《Learning Scrapy》的过程中，根据ch03的代码，下载了Docker，然后Docker的地址为192.168.99.100，为了图方便，没有修改hosts的内容，在代码中，直接使用ip作为start urls，然后，无法爬取下一个页面，一直是以为是Rule写错了，修改Rule也无法验证，因为没有办法获取下一页的内容&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;起始的代码为：&lt;/p&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;allowed_domains = [&lt;span class=&quot;string&quot;&gt;&#39;192.168.99.100&#39;&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;start_urls = [&lt;span class=&quot;string&quot;&gt;&#39;192.168.99.100:32768/properties/index_00000.html&#39;&lt;/span&gt;,]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;修改为：&lt;/p&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;allowed_domains = [&lt;span class=&quot;string&quot;&gt;&#39;web&#39;&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;start_urls = [&lt;span class=&quot;string&quot;&gt;&#39;http://web:32768/properties/index_00000.html&#39;&lt;/span&gt;,]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;这样就可以了，但是不知道原因，如果以后知道了，就再补上&lt;br&gt;补一个&lt;a href=&quot;http://stackoverflow.com/questions/37017741/why-it-cant-come-out-the-next-parse-about-scrapy-crawl/37020756#37020756&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;stackoverflow的问题链接&lt;/a&gt;，没人回答╮(╯▽╰)╭&lt;/p&gt;
&lt;/blockquote&gt;
</content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;先描述一下问题：在学习《Learning Scrapy》的过程中，根据ch03的代码，下载了Docker，然后Docker的地址为192.168.99.100，为了图方便，没有修改hosts的内容，在代码中，直接使用ip作为start urls，然
    
    </summary>
    
      <category term="error" scheme="http://yoursite.com/categories/error/"/>
    
    
      <category term="scrapy" scheme="http://yoursite.com/tags/scrapy/"/>
    
      <category term="error" scheme="http://yoursite.com/tags/error/"/>
    
  </entry>
  
  <entry>
    <title>反思毕业3年</title>
    <link href="http://yoursite.com/2016/05/03/%E5%8F%8D%E6%80%9D%E6%AF%95%E4%B8%9A3%E5%B9%B4/"/>
    <id>http://yoursite.com/2016/05/03/反思毕业3年/</id>
    <published>2016-05-03T06:57:56.000Z</published>
    <updated>2016-05-03T07:02:17.000Z</updated>
    
    <content type="html">&lt;p&gt;  已经毕业3年，无可避讳。&lt;br&gt;  当前2年可以认为是一种尝试，在1年半的时候，好像必须趋于一种稳定，希望在一个地方安定下来，有固定的朋友，固定的社交圈。&lt;br&gt;  其他的都是一种尝试，工作很轻松，没有压力，但是也没有什么动力。在这种温水中，更希望去做一些创造性的东西。自学了很久的python，仍然没有什么进展，仅仅是14年自己爬虫了一些简单的网易彩票的数据，其他的便没有任何，而且当时的代码并没有任何可值得称赞的地方，即使是当时，都是觉得很不能辨认的。&lt;br&gt;  于今天，我觉得我想当浮躁，过于浮躁地活着，没有踏踏实实地活着。希望得到更多，却放弃了付出，舍不得付出，计较着一些鸡毛蒜皮的事情，很可悲。&lt;br&gt;  希望今后的每天都能脚踏实地地学习、生活。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;  已经毕业3年，无可避讳。&lt;br&gt;  当前2年可以认为是一种尝试，在1年半的时候，好像必须趋于一种稳定，希望在一个地方安定下来，有固定的朋友，固定的社交圈。&lt;br&gt;  其他的都是一种尝试，工作很轻松，没有压力，但是也没有什么动力。在这种温水中，更希望去做一些创造性的东西。
    
    </summary>
    
    
      <category term="日记" scheme="http://yoursite.com/tags/%E6%97%A5%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>Scrapy examples尝试</title>
    <link href="http://yoursite.com/2016/04/22/Scrapy-examples%E5%B0%9D%E8%AF%95/"/>
    <id>http://yoursite.com/2016/04/22/Scrapy-examples尝试/</id>
    <published>2016-04-22T07:24:26.000Z</published>
    <updated>2016-04-22T07:25:29.000Z</updated>
    
    <content type="html">&lt;p&gt;  因为最近在看scrapy，看的书有《Learning Scrapy》&lt;br&gt;  从Github上找了点例子来学习， 例子地址为：&lt;a href=&quot;https://github.com/geekan/scrapy-examples&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/geekan/scrapy-examples&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;  因为最近在看scrapy，看的书有《Learning Scrapy》&lt;br&gt;  从Github上找了点例子来学习， 例子地址为：&lt;a href=&quot;https://github.com/geekan/scrapy-examples&quot; target=&quot;_blank&quot; rel
    
    </summary>
    
    
      <category term="scrapy" scheme="http://yoursite.com/tags/scrapy/"/>
    
  </entry>
  
  <entry>
    <title>Rule object is not iterable</title>
    <link href="http://yoursite.com/2016/04/22/iterable/"/>
    <id>http://yoursite.com/2016/04/22/iterable/</id>
    <published>2016-04-22T00:52:11.000Z</published>
    <updated>2016-04-22T02:50:05.000Z</updated>
    
    <content type="html">&lt;p&gt;问题：&lt;br&gt;    &lt;code&gt;exceptions.TypeError: &amp;#39;Rule&amp;#39; object is not iterable&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;原因：&lt;br&gt;    &lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;rules =(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       Rule(SgmlLinkExtractor(allow = ()) ,callback = &lt;span class=&quot;string&quot;&gt;&#39;parse_item&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       )&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;不是可以迭代的对象
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;修改为：&lt;br&gt;    &lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;rules =(Rule(SgmlLinkExtractor(allow = ()) ,callback = &lt;span class=&quot;string&quot;&gt;&#39;parse_item&#39;&lt;/span&gt;),)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;问题：&lt;br&gt;    &lt;code&gt;exceptions.TypeError: &amp;#39;Rule&amp;#39; object is not iterable&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;原因：&lt;br&gt;    &lt;figure class=&quot;highlight python&quot;&gt;&lt;t
    
    </summary>
    
    
      <category term="scrapy" scheme="http://yoursite.com/tags/scrapy/"/>
    
      <category term="python" scheme="http://yoursite.com/tags/python/"/>
    
      <category term="error" scheme="http://yoursite.com/tags/error/"/>
    
  </entry>
  
</feed>
